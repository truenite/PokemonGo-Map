{"version":3,"sources":["../../js/map.js"],"names":[],"mappings":"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","file":"map.built.js","sourcesContent":["\n//\n// Global map.js variables\n//\n\nvar $selectExclude;\nvar $selectNotify;\n\nvar language = document.documentElement.lang == \"\" ? \"en\" : document.documentElement.lang;\nvar idToPokemon = {};\n\nvar excludedPokemon = [];\nvar notifiedPokemon = [];\n\nvar map;\nvar rawDataIsLoading = false;\nvar locationMarker;\nvar marker;\n\nvar noLabelsStyle=[{featureType:\"poi\",elementType:\"labels\",stylers:[{visibility:\"off\"}]},{\"featureType\":\"all\",\"elementType\":\"labels.icon\",\"stylers\":[{\"visibility\":\"off\"}]}];\nvar light2Style=[{\"elementType\":\"geometry\",\"stylers\":[{\"hue\":\"#ff4400\"},{\"saturation\":-68},{\"lightness\":-4},{\"gamma\":0.72}]},{\"featureType\":\"road\",\"elementType\":\"labels.icon\"},{\"featureType\":\"landscape.man_made\",\"elementType\":\"geometry\",\"stylers\":[{\"hue\":\"#0077ff\"},{\"gamma\":3.1}]},{\"featureType\":\"water\",\"stylers\":[{\"hue\":\"#00ccff\"},{\"gamma\":0.44},{\"saturation\":-33}]},{\"featureType\":\"poi.park\",\"stylers\":[{\"hue\":\"#44ff00\"},{\"saturation\":-23}]},{\"featureType\":\"water\",\"elementType\":\"labels.text.fill\",\"stylers\":[{\"hue\":\"#007fff\"},{\"gamma\":0.77},{\"saturation\":65},{\"lightness\":99}]},{\"featureType\":\"water\",\"elementType\":\"labels.text.stroke\",\"stylers\":[{\"gamma\":0.11},{\"weight\":5.6},{\"saturation\":99},{\"hue\":\"#0091ff\"},{\"lightness\":-86}]},{\"featureType\":\"transit.line\",\"elementType\":\"geometry\",\"stylers\":[{\"lightness\":-48},{\"hue\":\"#ff5e00\"},{\"gamma\":1.2},{\"saturation\":-23}]},{\"featureType\":\"transit\",\"elementType\":\"labels.text.stroke\",\"stylers\":[{\"saturation\":-64},{\"hue\":\"#ff9100\"},{\"lightness\":16},{\"gamma\":0.47},{\"weight\":2.7}]}];\nvar darkStyle=[{\"featureType\":\"all\",\"elementType\":\"labels.text.fill\",\"stylers\":[{\"saturation\":36},{\"color\":\"#b39964\"},{\"lightness\":40}]},{\"featureType\":\"all\",\"elementType\":\"labels.text.stroke\",\"stylers\":[{\"visibility\":\"on\"},{\"color\":\"#000000\"},{\"lightness\":16}]},{\"featureType\":\"all\",\"elementType\":\"labels.icon\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"administrative\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":20}]},{\"featureType\":\"administrative\",\"elementType\":\"geometry.stroke\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":17},{\"weight\":1.2}]},{\"featureType\":\"landscape\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":20}]},{\"featureType\":\"poi\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":21}]},{\"featureType\":\"road.highway\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":17}]},{\"featureType\":\"road.highway\",\"elementType\":\"geometry.stroke\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":29},{\"weight\":0.2}]},{\"featureType\":\"road.arterial\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":18}]},{\"featureType\":\"road.local\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#181818\"},{\"lightness\":16}]},{\"featureType\":\"transit\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":19}]},{\"featureType\":\"water\",\"elementType\":\"geometry\",\"stylers\":[{\"lightness\":17},{\"color\":\"#525252\"}]}];\nvar pGoStyle=[{\"featureType\":\"landscape.man_made\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#a1f199\"}]},{\"featureType\":\"landscape.natural.landcover\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#37bda2\"}]},{\"featureType\":\"landscape.natural.terrain\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#37bda2\"}]},{\"featureType\":\"poi.attraction\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"visibility\":\"on\"}]},{\"featureType\":\"poi.business\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#e4dfd9\"}]},{\"featureType\":\"poi.business\",\"elementType\":\"labels.icon\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"poi.park\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#37bda2\"}]},{\"featureType\":\"road\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#84b09e\"}]},{\"featureType\":\"road\",\"elementType\":\"geometry.stroke\",\"stylers\":[{\"color\":\"#fafeb8\"},{\"weight\":\"1.25\"}]},{\"featureType\":\"road.highway\",\"elementType\":\"labels.icon\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"water\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#5ddad6\"}]}];\nvar light2StyleNoLabels=[{\"elementType\":\"geometry\",\"stylers\":[{\"hue\":\"#ff4400\"},{\"saturation\":-68},{\"lightness\":-4},{\"gamma\":0.72}]},{\"featureType\":\"road\",\"elementType\":\"labels.icon\"},{\"featureType\":\"landscape.man_made\",\"elementType\":\"geometry\",\"stylers\":[{\"hue\":\"#0077ff\"},{\"gamma\":3.1}]},{\"featureType\":\"water\",\"stylers\":[{\"hue\":\"#00ccff\"},{\"gamma\":0.44},{\"saturation\":-33}]},{\"featureType\":\"poi.park\",\"stylers\":[{\"hue\":\"#44ff00\"},{\"saturation\":-23}]},{\"featureType\":\"water\",\"elementType\":\"labels.text.fill\",\"stylers\":[{\"hue\":\"#007fff\"},{\"gamma\":0.77},{\"saturation\":65},{\"lightness\":99}]},{\"featureType\":\"water\",\"elementType\":\"labels.text.stroke\",\"stylers\":[{\"gamma\":0.11},{\"weight\":5.6},{\"saturation\":99},{\"hue\":\"#0091ff\"},{\"lightness\":-86}]},{\"featureType\":\"transit.line\",\"elementType\":\"geometry\",\"stylers\":[{\"lightness\":-48},{\"hue\":\"#ff5e00\"},{\"gamma\":1.2},{\"saturation\":-23}]},{\"featureType\":\"transit\",\"elementType\":\"labels.text.stroke\",\"stylers\":[{\"saturation\":-64},{\"hue\":\"#ff9100\"},{\"lightness\":16},{\"gamma\":0.47},{\"weight\":2.7}]},{\"featureType\":\"all\",\"elementType\":\"labels.text.stroke\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"all\",\"elementType\":\"labels.text.fill\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"all\",\"elementType\":\"labels.icon\",\"stylers\":[{\"visibility\":\"off\"}]}];\nvar darkStyleNoLabels=[{\"featureType\":\"all\",\"elementType\":\"labels.text.fill\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"all\",\"elementType\":\"labels.text.stroke\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"all\",\"elementType\":\"labels.icon\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"administrative\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":20}]},{\"featureType\":\"administrative\",\"elementType\":\"geometry.stroke\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":17},{\"weight\":1.2}]},{\"featureType\":\"landscape\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":20}]},{\"featureType\":\"poi\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":21}]},{\"featureType\":\"road.highway\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":17}]},{\"featureType\":\"road.highway\",\"elementType\":\"geometry.stroke\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":29},{\"weight\":0.2}]},{\"featureType\":\"road.arterial\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":18}]},{\"featureType\":\"road.local\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#181818\"},{\"lightness\":16}]},{\"featureType\":\"transit\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":19}]},{\"featureType\":\"water\",\"elementType\":\"geometry\",\"stylers\":[{\"lightness\":17},{\"color\":\"#525252\"}]}];\nvar pGoStyleNoLabels=[{\"featureType\":\"landscape.man_made\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#a1f199\"}]},{\"featureType\":\"landscape.natural.landcover\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#37bda2\"}]},{\"featureType\":\"landscape.natural.terrain\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#37bda2\"}]},{\"featureType\":\"poi.attraction\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"visibility\":\"on\"}]},{\"featureType\":\"poi.business\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#e4dfd9\"}]},{\"featureType\":\"poi.business\",\"elementType\":\"labels.icon\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"poi.park\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#37bda2\"}]},{\"featureType\":\"road\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#84b09e\"}]},{\"featureType\":\"road\",\"elementType\":\"geometry.stroke\",\"stylers\":[{\"color\":\"#fafeb8\"},{\"weight\":\"1.25\"}]},{\"featureType\":\"road.highway\",\"elementType\":\"labels.icon\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"water\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#5ddad6\"}]},{\"featureType\":\"all\",\"elementType\":\"labels.text.stroke\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"all\",\"elementType\":\"labels.text.fill\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"all\",\"elementType\":\"labels.icon\",\"stylers\":[{\"visibility\":\"off\"}]}];\n\nvar selectedStyle = 'light';\n\nvar map_data = {\n  pokemons: {},\n  gyms: {},\n  pokestops: {},\n  lure_pokemons: {},\n};\nvar gym_types = [\"Uncontested\", \"Mystic\", \"Valor\", \"Instinct\"];\nvar audio = new Audio('static/sounds/ding.mp3');\nvar pokemon_sprites = {\n  normal: {\n    columns: 12,\n    icon_width: 30,\n    icon_height: 30,\n    sprite_width: 360,\n    sprite_height: 390,\n    filename: 'static/icons-sprite.png',\n    name: 'Normal'\n  },\n  highres: {\n    columns: 7,\n    icon_width: 65,\n    icon_height: 65,\n    sprite_width: 455,\n    sprite_height: 1430,\n    filename: 'static/icons-large-sprite.png',\n    name: 'High-Res'\n  }\n};\n\n//\n// LocalStorage helpers\n//\n\nvar StoreTypes = {\n  Boolean: {\n    parse: function(str) {\n      switch (str.toLowerCase()) {\n        case '1':\n        case 'true':\n        case 'yes':\n        return true;\n        default:\n        return false;\n      }\n    },\n    stringify: function(b) {\n      return b ? 'true' : 'false';\n    }\n  },\n  JSON: {\n    parse: function(str) {\n      return JSON.parse(str);\n    },\n    stringify: function(json) {\n      return JSON.stringify(json);\n    }\n  },\n  String: {\n    parse: function(str) {\n      return str;\n    },\n    stringify: function(str) {\n      return str;\n    }\n  },\n  Number: {\n    parse: function(str) {\n      return parseInt(str, 10);\n    },\n    stringify: function(number) {\n      return number.toString();\n    }\n  }\n};\n\nvar StoreOptions = {\n  map_style: {\n    default: 'roadmap',\n    type: StoreTypes.String\n  },\n  remember_select_exclude: {\n    default: [],\n    type: StoreTypes.JSON\n  },\n  remember_select_notify: {\n    default: [],\n    type: StoreTypes.JSON\n  },\n  showGyms: {\n    default: false,\n    type: StoreTypes.Boolean\n  },\n  showPokemon: {\n    default: true,\n    type: StoreTypes.Boolean\n  },\n  showLuredPokemon: {\n    default: true,\n    type: StoreTypes.Boolean\n  },\n  showPokestops: {\n    default: true,\n    type: StoreTypes.Boolean\n  },\n  showLuredPokestopsOnly: {\n    default: 0,\n    type: StoreTypes.Number\n  },\n  playSound: {\n    default: false,\n    type: StoreTypes.Boolean\n  },\n  geoLocate: {\n    default: false,\n    type: StoreTypes.Boolean\n  },\n  playSound: {\n    default: false,\n    type: StoreTypes.Boolean\n  },\n  pokemonIcons: {\n    default: 'highres',\n    type: StoreTypes.String\n  },\n  iconSizeModifier: {\n    default: 0,\n    type: StoreTypes.Number\n  }\n};\n\nvar Store = {\n  getOption: function(key) {\n    var option = StoreOptions[key];\n    if (!option) {\n      throw \"Store key was not defined \" + key;\n    }\n    return option;\n  },\n  get: function(key) {\n    var option = this.getOption(key);\n    var optionType = option.type;\n    var rawValue = localStorage[key];\n    if (rawValue === null || rawValue === undefined) {\n      return option.default;\n    }\n    var value = optionType.parse(rawValue);\n    return value;\n  },\n  set: function(key, value) {\n    var option = this.getOption(key);\n    var optionType = option.type || StoreTypes.String;\n    var rawValue = optionType.stringify(value);\n    localStorage[key] = rawValue;\n  },\n  reset: function(key) {\n    localStorage.removeItem(key);\n  }\n};\n\n//\n// Functions\n//\n\nfunction excludePokemon(id) {\n  $selectExclude.val(\n    $selectExclude.val().concat(id)\n  ).trigger('change')\n}\n\nfunction notifyAboutPokemon(id) {\n  $selectNotify.val(\n    $selectNotify.val().concat(id)\n  ).trigger('change')\n}\n\nfunction removePokemonMarker(encounter_id) {\n  map_data.pokemons[encounter_id].marker.setMap(null);\n  map_data.pokemons[encounter_id].hidden = true;\n}\n\nfunction initMap() {\n  map = new google.maps.Map(document.getElementById('map'), {\n    center: {\n      lat: center_lat,\n      lng: center_lng\n    },\n    zoom: 16,\n    fullscreenControl: true,\n    streetViewControl: false,\n    mapTypeControl: true,\n    mapTypeControlOptions: {\n      style: google.maps.MapTypeControlStyle.DROPDOWN_MENU,\n      position: google.maps.ControlPosition.RIGHT_TOP,\n      mapTypeIds: [\n        google.maps.MapTypeId.ROADMAP,\n        google.maps.MapTypeId.SATELLITE,\n        'nolabels_style',\n        'dark_style',\n        'style_light2',\n        'style_pgo',\n        'dark_style_nl',\n        'style_light2_nl',\n        'style_pgo_nl'\n      ]\n    },\n  });\n\n  var style_NoLabels = new google.maps.StyledMapType(noLabelsStyle, {\n    name: \"No Labels\"\n  });\n  map.mapTypes.set('nolabels_style', style_NoLabels);\n\n  var style_dark = new google.maps.StyledMapType(darkStyle, {\n    name: \"Dark\"\n  });\n  map.mapTypes.set('dark_style', style_dark);\n\n  var style_light2 = new google.maps.StyledMapType(light2Style, {\n    name: \"Light2\"\n  });\n  map.mapTypes.set('style_light2', style_light2);\n\n  var style_pgo = new google.maps.StyledMapType(pGoStyle, {\n    name: \"PokemonGo\"\n  });\n  map.mapTypes.set('style_pgo', style_pgo);\n\n  var style_dark_nl = new google.maps.StyledMapType(darkStyleNoLabels, {\n    name: \"Dark (No Labels)\"\n  });\n  map.mapTypes.set('dark_style_nl', style_dark_nl);\n\n  var style_light2_nl = new google.maps.StyledMapType(light2StyleNoLabels, {\n    name: \"Light2 (No Labels)\"\n  });\n  map.mapTypes.set('style_light2_nl', style_light2_nl);\n\n  var style_pgo_nl = new google.maps.StyledMapType(pGoStyleNoLabels, {\n    name: \"PokemonGo (No Labels)\"\n  });\n  map.mapTypes.set('style_pgo_nl', style_pgo_nl);\n\n  map.addListener('maptypeid_changed', function(s) {\n    Store.set('map_style', this.mapTypeId);\n  });\n\n  map.setMapTypeId(Store.get('map_style'));\n  google.maps.event.addListener(map, 'idle', updateMap);\n\n  addMyLocationButton();\n  initSidebar();\n  google.maps.event.addListenerOnce(map, 'idle', function() {\n    updateMap();\n  });\n\n  google.maps.event.addListener(map, 'zoom_changed', function() {\n    redrawPokemon(map_data.pokemons);\n    redrawPokemon(map_data.lure_pokemons);\n  });\n}\n\nfunction initSidebar() {\n  $('#gyms-switch').prop('checked', Store.get('showGyms'));\n  $('#pokemon-switch').prop('checked', Store.get('showPokemon'));\n  $('#pokestops-switch').prop('checked', Store.get('showPokestops'));\n  $('#lured-pokestops-only-switch').val(Store.get('showLuredPokestopsOnly'));\n  $('#lured-pokestops-only-wrapper').toggle(Store.get('showPokestops'));\n  $('#geoloc-switch').prop('checked', Store.get('geoLocate'));\n  $('#sound-switch').prop('checked', Store.get('playSound'));\n\n  var searchBox = new google.maps.places.SearchBox(document.getElementById('next-location'));\n  $(\"#next-location\").css(\"background-color\", $('#geoloc-switch').prop('checked') ? \"#e0e0e0\" : \"#ffffff\");\n\n  searchBox.addListener('places_changed', function() {\n    var places = searchBox.getPlaces();\n\n    if (places.length == 0) {\n      return;\n    }\n\n    var loc = places[0].geometry.location;\n    changeLocation(loc.lat(), loc.lng());\n  });\n\n  var icons = $('#pokemon-icons');\n  $.each(pokemon_sprites, function(key, value) {\n    icons.append($('<option></option>').attr(\"value\", key).text(value.name));\n  });\n  icons.val((pokemon_sprites[Store.get('pokemonIcons')]) ? Store.get('pokemonIcons') : 'highres');\n  $('#pokemon-icon-size').val(Store.get('iconSizeModifier'));\n}\n\nfunction pad(number) {\n  return number <= 99 ? (\"0\" + number).slice(-2) : number;\n}\n\nfunction pokemonLabel(name, disappear_time, id, latitude, longitude, encounter_id) {\n  var disappear_date = new Date(disappear_time)\n\n  var contentstring = `\n  <div>\n  <b>${name}</b>\n  <span> - </span>\n  <small>\n  <a href='http://www.pokemon.com/us/pokedex/${id}' target='_blank' title='View in Pokedex'>#${id}</a>\n  </small>\n  </div>\n  <div>\n  Disappears at ${pad(disappear_date.getHours())}:${pad(disappear_date.getMinutes())}:${pad(disappear_date.getSeconds())}\n  <span class='label-countdown' disappears-at='${disappear_time}'>(00m00s)</span>\n  </div>\n  <div>\n  Location: ${latitude.toFixed(6)}, ${longitude.toFixed(7)}\n  </div>\n  <div>\n  <a href='javascript:excludePokemon(${id})'>Exclude</a>&nbsp;&nbsp;\n  <a href='javascript:notifyAboutPokemon(${id})'>Notify</a>&nbsp;&nbsp;\n  <a href='javascript:removePokemonMarker(\"${encounter_id}\")'>Remove</a>&nbsp;&nbsp;\n  <a href='https://www.google.com/maps/dir/Current+Location/${latitude},${longitude}' target='_blank' title='View in Maps'>Get directions</a>\n  </div>`;\n  return contentstring;\n}\n\nfunction gymLabel(team_name, team_id, gym_points, latitude, longitude) {\n  var gym_color = [\"0, 0, 0, .4\", \"74, 138, 202, .6\", \"240, 68, 58, .6\", \"254, 217, 40, .6\"];\n  var str;\n  if (team_id == 0) {\n    str = `\n    <div>\n    <center>\n    <div>\n    <b style='color:rgba(${gym_color[team_id]})'>${team_name}</b><br>\n    <img height='70px' style='padding: 5px;' src='static/forts/${team_name}_large.png'>\n    </div>\n    <div>\n    Location: ${latitude.toFixed(6)}, ${longitude.toFixed(7)}\n    </div>\n    <div>\n    <a href='https://www.google.com/maps/dir/Current+Location/${latitude},${longitude}' target='_blank' title='View in Maps'>Get directions</a>\n    </div>\n    </center>\n    </div>`;\n  } else {\n    var gym_prestige = [2000, 4000, 8000, 12000, 16000, 20000, 30000, 40000, 50000];\n    var gym_level = 1;\n    while (gym_points >= gym_prestige[gym_level - 1]) {\n      gym_level++;\n    }\n    str = `\n    <div>\n    <center>\n    <div style='padding-bottom: 2px'>\n    Gym owned by:\n    </div>\n    <div>\n    <b style='color:rgba(${gym_color[team_id]})'>Team ${team_name}</b><br>\n    <img height='70px' style='padding: 5px;' src='static/forts/${team_name}_large.png'>\n    </div>\n    <div>\n    Level: ${gym_level} | Prestige: ${gym_points}\n    </div>\n    <div>\n    Location: ${latitude.toFixed(6)}, ${longitude.toFixed(7)}\n    </div>\n    <div>\n    <a href='https://www.google.com/maps/dir/Current+Location/${latitude},${longitude}' target='_blank' title='View in Maps'>Get directions</a>\n    </div>\n    </center>\n    </div>`;\n  }\n\n  return str;\n}\n\nfunction pokestopLabel(lured, last_modified, active_pokemon_id, latitude, longitude) {\n  var str;\n  if (lured) {\n    var active_pokemon = idToPokemon[active_pokemon_id];\n\n    var last_modified_date = new Date(last_modified);\n    var current_date = new Date();\n\n    var time_until_expire = current_date.getTime() - last_modified_date.getTime();\n\n    var expire_date = new Date(current_date.getTime() + time_until_expire);\n    var expire_time = expire_date.getTime();\n\n    str = `\n    <div>\n    <b>Lured Pokéstop</b>\n    </div>\n    <div>\n    Lured Pokémon: ${active_pokemon}\n    <span> - </span>\n    <small>\n    <a href='http://www.pokemon.com/us/pokedex/${active_pokemon_id}' target='_blank' title='View in Pokedex'>#${active_pokemon_id}</a>\n    </small>\n    </div>\n    <div>\n    Lure expires at ${pad(expire_date.getHours())}:${pad(expire_date.getMinutes())}:${pad(expire_date.getSeconds())}\n    <span class='label-countdown' disappears-at='${expire_time}'>(00m00s)</span>\n    </div>\n    <div>\n    Location: ${latitude.toFixed(6)}, ${longitude.toFixed(7)}\n    </div>\n    <div>\n    <a href='https://www.google.com/maps/dir/Current+Location/${latitude},${longitude}' target='_blank' title='View in Maps'>Get directions</a>\n    </div>`;\n  } else {\n    str = `\n    <div>\n    <b>Pokéstop</b>\n    </div>\n    <div>\n    Location: ${latitude.toFixed(6)}, ${longitude.toFixed(7)}\n    </div>\n    <div>\n    <a href='https://www.google.com/maps/dir/Current+Location/${latitude},${longitude}' target='_blank' title='View in Maps'>Get directions</a>\n    </div>`;\n  }\n\n  return str;\n}\n\n\nfunction getGoogleSprite(index, sprite, display_height) {\n  display_height = Math.max(display_height, 3);\n  var scale = display_height / sprite.icon_height;\n  // Crop icon just a tiny bit to avoid bleedover from neighbor\n  var scaled_icon_size = new google.maps.Size(scale * sprite.icon_width - 1, scale * sprite.icon_height - 1);\n  var scaled_icon_offset = new google.maps.Point(\n    (index % sprite.columns) * sprite.icon_width * scale + 0.5,\n    Math.floor(index / sprite.columns) * sprite.icon_height * scale + 0.5);\n    var scaled_sprite_size = new google.maps.Size(scale * sprite.sprite_width, scale * sprite.sprite_height);\n    var scaled_icon_center_offset = new google.maps.Point(scale * sprite.icon_width / 2, scale * sprite.icon_height / 2);\n\n    return {\n      url: sprite.filename,\n      size: scaled_icon_size,\n      scaledSize: scaled_sprite_size,\n      origin: scaled_icon_offset,\n      anchor: scaled_icon_center_offset\n    };\n  }\n\n  function setupPokemonMarker(item, skipNotification, isBounceDisabled) {\n    // Scale icon size up with the map exponentially\n    var icon_size = 2 + (map.getZoom() - 3) * (map.getZoom() - 3) * .2 + Store.get('iconSizeModifier');\n    var pokemon_index = item.pokemon_id - 1;\n    var sprite = pokemon_sprites[Store.get('pokemonIcons')] || pokemon_sprites['highres']\n    var icon = getGoogleSprite(pokemon_index, sprite, icon_size);\n\n    var animationDisabled = false;\n    if (isBounceDisabled == true) {\n      animationDisabled = true;\n    }\n\n    var marker = new google.maps.Marker({\n      position: {\n        lat: item.latitude,\n        lng: item.longitude\n      },\n      zIndex: 9999,\n      optimized: false,\n      map: map,\n      icon: icon,\n      animationDisabled: animationDisabled,\n    });\n\n    marker.addListener('click', function() {\n      this.setAnimation(null);\n      this.animationDisabled = true;\n    });\n\n    marker.infoWindow = new google.maps.InfoWindow({\n      content: pokemonLabel(item.pokemon_name, item.disappear_time, item.pokemon_id, item.latitude, item.longitude, item.encounter_id),\n      disableAutoPan: true\n    });\n\n    if (notifiedPokemon.indexOf(item.pokemon_id) > -1) {\n      if (!skipNotification) {\n        if (Store.get('playSound')) {\n          audio.play();\n        }\n        sendNotification('A wild ' + item.pokemon_name + ' appeared!', 'Click to load map', 'static/icons/' + item.pokemon_id + '.png', item.latitude, item.longitude);\n      }\n      if (marker.animationDisabled != true) {\n        marker.setAnimation(google.maps.Animation.BOUNCE);\n      }\n    }\n\n    addListeners(marker);\n    return marker;\n  }\n\n  function setupGymMarker(item) {\n    var marker = new google.maps.Marker({\n      position: {\n        lat: item.latitude,\n        lng: item.longitude\n      },\n      map: map,\n      icon: 'static/forts/' + gym_types[item.team_id] + '.png'\n    });\n\n    marker.infoWindow = new google.maps.InfoWindow({\n      content: gymLabel(gym_types[item.team_id], item.team_id, item.gym_points, item.latitude, item.longitude),\n      disableAutoPan: true\n    });\n\n    addListeners(marker);\n    return marker;\n  }\n\n  function setupPokestopMarker(item) {\n    var imagename = !!item.lure_expiration ? \"PstopLured\" : \"Pstop\";\n    var marker = new google.maps.Marker({\n      position: {\n        lat: item.latitude,\n        lng: item.longitude,\n      },\n      map: map,\n      zIndex: 2,\n      optimized: false,\n      icon: 'static/forts/' + imagename + '.png',\n    });\n\n    marker.infoWindow = new google.maps.InfoWindow({\n      content: pokestopLabel(!!item.lure_expiration, item.last_modified, item.active_pokemon_id, item.latitude + .003, item.longitude + .003),\n      disableAutoPan: true\n    });\n\n    addListeners(marker);\n    return marker;\n  }\n\n  function getColorByDate(value) {\n    //Changes the color from red to green over 15 mins\n    var diff = (Date.now() - value) / 1000 / 60 / 15;\n\n    if (diff > 1) {\n      diff = 1;\n    }\n\n    //value from 0 to 1 - Green to Red\n    var hue = ((1 - diff) * 120).toString(10);\n    return [\"hsl(\", hue, \",100%,50%)\"].join(\"\");\n  }\n\n  function clearSelection() {\n    if (document.selection) {\n      document.selection.empty();\n    } else if (window.getSelection) {\n      window.getSelection().removeAllRanges();\n    }\n  }\n\n  function addListeners(marker) {\n    marker.addListener('click', function() {\n      marker.infoWindow.open(map, marker);\n      clearSelection();\n      updateLabelDiffTime();\n      marker.persist = true;\n    });\n\n    google.maps.event.addListener(marker.infoWindow, 'closeclick', function() {\n      marker.persist = null;\n    });\n\n    marker.addListener('mouseover', function() {\n      marker.infoWindow.open(map, marker);\n      clearSelection();\n      updateLabelDiffTime();\n    });\n\n    marker.addListener('mouseout', function() {\n      if (!marker.persist) {\n        marker.infoWindow.close();\n      }\n    });\n\n    return marker\n  }\n\n  function clearStaleMarkers() {\n    $.each(map_data.pokemons, function(key, value) {\n      if (map_data.pokemons[key]['disappear_time'] < new Date().getTime() ||\n      excludedPokemon.indexOf(map_data.pokemons[key]['pokemon_id']) >= 0) {\n        map_data.pokemons[key].marker.setMap(null);\n        delete map_data.pokemons[key];\n      }\n    });\n\n    $.each(map_data.lure_pokemons, function(key, value) {\n      if (map_data.lure_pokemons[key]['lure_expiration'] < new Date().getTime() ||\n      excludedPokemon.indexOf(map_data.lure_pokemons[key]['pokemon_id']) >= 0) {\n        map_data.lure_pokemons[key].marker.setMap(null);\n        delete map_data.lure_pokemons[key];\n      }\n    });\n  }\n\n  function showInBoundsMarkers(markers) {\n    $.each(markers, function(key, value) {\n      var marker = markers[key].marker;\n      var show = false;\n      if (!markers[key].hidden) {\n        if (typeof marker.getPosition === 'function') {\n          if (map.getBounds().contains(marker.getPosition())) {\n            show = true;\n          }\n        } else if (typeof marker.getCenter === 'function') {\n          if (map.getBounds().contains(marker.getCenter())) {\n            show = true;\n          }\n        }\n      }\n\n      if (show && !markers[key].marker.getMap()) {\n        markers[key].marker.setMap(map);\n      } else if (!show && markers[key].marker.getMap()) {\n        markers[key].marker.setMap(null);\n      }\n    });\n  }\n\n  function loadRawData() {\n    var loadPokemon = Store.get('showPokemon');\n    var loadGyms = Store.get('showGyms');\n    var loadPokestops = Store.get('showPokestops') || Store.get('showPokemon');\n\n    var bounds = map.getBounds();\n    var swPoint = bounds.getSouthWest();\n    var nePoint = bounds.getNorthEast();\n    var swLat = swPoint.lat();\n    var swLng = swPoint.lng();\n    var neLat = nePoint.lat();\n    var neLng = nePoint.lng();\n\n    return $.ajax({\n      url: \"raw_data\",\n      type: 'GET',\n      data: {\n        'pokemon': loadPokemon,\n        'pokestops': loadPokestops,\n        'gyms': loadGyms,\n        'swLat': swLat,\n        'swLng': swLng,\n        'neLat': neLat,\n        'neLng': neLng\n      },\n      dataType: \"json\",\n      beforeSend: function() {\n        if (rawDataIsLoading) {\n          return false;\n        } else {\n          rawDataIsLoading = true;\n        }\n      },\n      complete: function() {\n        rawDataIsLoading = false;\n      }\n    })\n  }\n\n  function processPokemons(i, item) {\n    if (!Store.get('showPokemon')) {\n      return false; // in case the checkbox was unchecked in the meantime.\n    }\n\n    if (!(item.encounter_id in map_data.pokemons) &&\n    excludedPokemon.indexOf(item.pokemon_id) < 0) {\n      // add marker to map and item to dict\n      if (item.marker) item.marker.setMap(null);\n      if (!item.hidden) {\n        item.marker = setupPokemonMarker(item);\n        map_data.pokemons[item.encounter_id] = item;\n      }\n    }\n  }\n\n  function processPokestops(i, item) {\n    if (!Store.get('showPokestops')) {\n      return false;\n    }\n\n    if (Store.get('showLuredPokestopsOnly') && !item.lure_expiration) {\n      if (map_data.pokestops[item.pokestop_id] && map_data.pokestops[item.pokestop_id].marker) {\n        map_data.pokestops[item.pokestop_id].marker.setMap(null);\n        delete map_data.pokestops[item.pokestop_id];\n      }\n      return true;\n    }\n\n    if (map_data.pokestops[item.pokestop_id] == null) { // add marker to map and item to dict\n      // add marker to map and item to dict\n      if (item.marker) item.marker.setMap(null);\n      item.marker = setupPokestopMarker(item);\n      map_data.pokestops[item.pokestop_id] = item;\n    } else {\n      var item2 = map_data.pokestops[item.pokestop_id];\n      if (!!item.lure_expiration != !!item2.lure_expiration || item.active_pokemon_id != item2.active_pokemon_id) {\n        item2.marker.setMap(null);\n        item.marker = setupPokestopMarker(item);\n        map_data.pokestops[item.pokestop_id] = item;\n      }\n    }\n  }\n\n  function processLuredPokemon(i, item) {\n    if (!Store.get('showPokemon')) {\n      return false;\n    }\n    var item2 = {\n      pokestop_id: item.pokestop_id,\n      lure_expiration: item.lure_expiration,\n      pokemon_id: item.active_pokemon_id,\n      latitude: item.latitude + 0.00005,\n      longitude: item.longitude + 0.00005,\n      pokemon_name: idToPokemon[item.active_pokemon_id],\n      disappear_time: item.lure_expiration\n    };\n\n    if (item2.pokemon_id == null) {\n      return;\n    }\n\n    if (map_data.lure_pokemons[item2.pokestop_id] == null && item2.lure_expiration) {\n      //if (item.marker) item.marker.setMap(null);\n      if (!item2.hidden) {\n        item2.marker = setupPokemonMarker(item2);\n        map_data.lure_pokemons[item2.pokestop_id] = item2;\n      }\n\n    }\n    if (map_data.lure_pokemons[item.pokestop_id] != null && item2.lure_expiration && item2.active_pokemon_id != map_data.lure_pokemons[item2.pokestop_id].active_pokemon_id) {\n      //if (item.marker) item.marker.setMap(null);\n      map_data.lure_pokemons[item2.pokestop_id].marker.setMap(null);\n      if (!item2.hidden) {\n        item2.marker = setupPokemonMarker(item2);\n        map_data.lure_pokemons[item2.pokestop_id] = item2;\n      }\n    }\n  }\n\n  function processGyms(i, item) {\n    if (!Store.get('showGyms')) {\n      return false; // in case the checkbox was unchecked in the meantime.\n    }\n\n    if (item.gym_id in map_data.gyms) {\n      // if team has changed, create new marker (new icon)\n      if (map_data.gyms[item.gym_id].team_id != item.team_id) {\n        map_data.gyms[item.gym_id].marker.setMap(null);\n        map_data.gyms[item.gym_id].marker = setupGymMarker(item);\n      } else { // if it hasn't changed generate new label only (in case prestige has changed)\n      map_data.gyms[item.gym_id].marker.infoWindow = new google.maps.InfoWindow({\n        content: gymLabel(gym_types[item.team_id], item.team_id, item.gym_points, item.latitude, item.longitude),\n        disableAutoPan: true\n      });\n    }\n  } else { // add marker to map and item to dict\n    if (item.marker) item.marker.setMap(null);\n    item.marker = setupGymMarker(item);\n    map_data.gyms[item.gym_id] = item;\n  }\n\n}\n\n\nfunction updateMap() {\n  loadRawData().done(function(result) {\n    $.each(result.pokemons, processPokemons);\n    $.each(result.pokestops, processPokestops);\n    $.each(result.pokestops, processLuredPokemon);\n    $.each(result.gyms, processGyms);\n    showInBoundsMarkers(map_data.pokemons);\n    showInBoundsMarkers(map_data.lure_pokemons);\n    showInBoundsMarkers(map_data.gyms);\n    showInBoundsMarkers(map_data.pokestops);\n    clearStaleMarkers();\n  });\n}\n\n\n\nfunction redrawPokemon(pokemon_list) {\n  var skipNotification = true;\n  $.each(pokemon_list, function(key, value) {\n    var item = pokemon_list[key];\n    if (!item.hidden) {\n      var new_marker = setupPokemonMarker(item, skipNotification, this.marker.animationDisabled);\n      item.marker.setMap(null);\n      pokemon_list[key].marker = new_marker;\n    }\n  });\n};\n\nvar updateLabelDiffTime = function() {\n  $('.label-countdown').each(function(index, element) {\n    var disappearsAt = new Date(parseInt(element.getAttribute(\"disappears-at\")));\n    var now = new Date();\n\n    var difference = Math.abs(disappearsAt - now);\n    var hours = Math.floor(difference / 36e5);\n    var minutes = Math.floor((difference - (hours * 36e5)) / 6e4);\n    var seconds = Math.floor((difference - (hours * 36e5) - (minutes * 6e4)) / 1e3);\n    var timestring = \"\";\n\n    if (disappearsAt < now) {\n      timestring = \"(expired)\";\n    } else {\n      timestring = \"(\";\n      if (hours > 0)\n      timestring = hours + \"h\";\n\n      timestring += (\"0\" + minutes).slice(-2) + \"m\";\n      timestring += (\"0\" + seconds).slice(-2) + \"s\";\n      timestring += \")\";\n    }\n\n    $(element).text(timestring)\n  });\n};\n\nfunction getPointDistance(pointA, pointB) {\n  return google.maps.geometry.spherical.computeDistanceBetween(pointA, pointB);\n}\n\nfunction sendNotification(title, text, icon, lat, lng) {\n  if (!(\"Notification\" in window)) {\n    return false; // Notifications are not present in browser\n  }\n\n  if (Notification.permission !== \"granted\") {\n    Notification.requestPermission();\n  } else {\n    var notification = new Notification(title, {\n      icon: icon,\n      body: text,\n      sound: 'sounds/ding.mp3'\n    });\n\n    notification.onclick = function() {\n      window.focus();\n      notification.close();\n\n      centerMap(lat, lng, 20);\n    };\n  }\n}\n\nfunction myLocationButton(map, marker) {\n  var locationContainer = document.createElement('div');\n\n  var locationButton = document.createElement('button');\n  locationButton.style.backgroundColor = '#fff';\n  locationButton.style.border = 'none';\n  locationButton.style.outline = 'none';\n  locationButton.style.width = '28px';\n  locationButton.style.height = '28px';\n  locationButton.style.borderRadius = '2px';\n  locationButton.style.boxShadow = '0 1px 4px rgba(0,0,0,0.3)';\n  locationButton.style.cursor = 'pointer';\n  locationButton.style.marginRight = '10px';\n  locationButton.style.padding = '0px';\n  locationButton.title = 'Your Location';\n  locationContainer.appendChild(locationButton);\n\n  var locationIcon = document.createElement('div');\n  locationIcon.style.margin = '5px';\n  locationIcon.style.width = '18px';\n  locationIcon.style.height = '18px';\n  locationIcon.style.backgroundImage = 'url(static/mylocation-sprite-1x.png)';\n  locationIcon.style.backgroundSize = '180px 18px';\n  locationIcon.style.backgroundPosition = '0px 0px';\n  locationIcon.style.backgroundRepeat = 'no-repeat';\n  locationIcon.id = 'current-location';\n  locationButton.appendChild(locationIcon);\n\n  locationButton.addEventListener('click', function() {\n    var currentLocation = document.getElementById('current-location');\n    var imgX = '0';\n    var animationInterval = setInterval(function() {\n      if (imgX == '-18') imgX = '0';\n      else imgX = '-18';\n      currentLocation.style.backgroundPosition = imgX + 'px 0';\n    }, 500);\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(function(position) {\n        var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);\n        locationMarker.setVisible(true);\n        locationMarker.setOptions({\n          'opacity': 1\n        });\n        locationMarker.setPosition(latlng);\n        map.setCenter(latlng);\n        clearInterval(animationInterval);\n        currentLocation.style.backgroundPosition = '-144px 0px';\n      });\n    } else {\n      clearInterval(animationInterval);\n      currentLocation.style.backgroundPosition = '0px 0px';\n    }\n  });\n\n  locationContainer.index = 1;\n  map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(locationContainer);\n}\n\nfunction addMyLocationButton() {\n  locationMarker = new google.maps.Marker({\n    map: map,\n    animation: google.maps.Animation.DROP,\n    position: {\n      lat: center_lat,\n      lng: center_lng\n    },\n    icon: {\n      path: google.maps.SymbolPath.CIRCLE,\n      fillOpacity: 1,\n      fillColor: '#1c8af6',\n      scale: 6,\n      strokeColor: '#1c8af6',\n      strokeWeight: 8,\n      strokeOpacity: 0.3\n    }\n  });\n  locationMarker.setVisible(false);\n\n  myLocationButton(map, locationMarker);\n\n  google.maps.event.addListener(map, 'dragend', function() {\n    var currentLocation = document.getElementById('current-location');\n    currentLocation.style.backgroundPosition = '0px 0px';\n    locationMarker.setOptions({\n      'opacity': 0.5\n    });\n  });\n}\n\nfunction changeLocation(lat, lng) {\n  var loc = new google.maps.LatLng(lat, lng);\n  changeSearchLocation(lat, lng).done(function() {\n    map.setCenter(loc);\n    marker.setPosition(loc);\n  });\n}\n\nfunction changeSearchLocation(lat, lng) {\n  return $.post(\"next_loc?lat=\" + lat + \"&lon=\" + lng, {});\n}\n\nfunction centerMap(lat, lng, zoom) {\n  var loc = new google.maps.LatLng(lat, lng);\n\n  map.setCenter(loc);\n\n  if (zoom) {\n    map.setZoom(zoom)\n  }\n}\n\n//\n// Page Ready Exection\n//\n\n$(function() {\n  if (!Notification) {\n    console.log('could not load notifications');\n    return;\n  }\n\n  if (Notification.permission !== \"granted\") {\n    Notification.requestPermission();\n  }\n});\n\n$(function() {\n  function formatState(state) {\n    if (!state.id) {\n      return state.text;\n    }\n    var $state = $(\n      '<span><i class=\"pokemon-sprite n' + state.element.value.toString() + '\"></i> ' + state.text + '</span>'\n    );\n    return $state;\n  };\n\n  $selectExclude = $(\"#exclude-pokemon\");\n  $selectNotify = $(\"#notify-pokemon\");\n  var numberOfPokemon = 151;\n\n  // Load pokemon names and populate lists\n  $.getJSON(\"static/locales/pokemon.\" + language + \".json\").done(function(data) {\n    var pokeList = [];\n\n    idToPokemon = data;\n\n    $.each(data, function(key, value) {\n      if (key > numberOfPokemon) {\n        return false;\n      }\n      pokeList.push({\n        id: key,\n        text: value + ' - #' + key\n      });\n    });\n\n    // setup the filter lists\n    $selectExclude.select2({\n      placeholder: \"Select Pokémon\",\n      data: pokeList,\n      templateResult: formatState\n    });\n    $selectNotify.select2({\n      placeholder: \"Select Pokémon\",\n      data: pokeList,\n      templateResult: formatState\n    });\n\n    // setup list change behavior now that we have the list to work from\n    $selectExclude.on(\"change\", function(e) {\n      excludedPokemon = $selectExclude.val().map(Number);\n      clearStaleMarkers();\n      Store.set('remember_select_exclude', excludedPokemon);\n    });\n    $selectNotify.on(\"change\", function(e) {\n      notifiedPokemon = $selectNotify.val().map(Number);\n      Store.set('remember_select_notify', notifiedPokemon);\n    });\n\n    // recall saved lists\n    $selectExclude.val(Store.get('remember_select_exclude')).trigger(\"change\");\n    $selectNotify.val(Store.get('remember_select_notify')).trigger(\"change\");\n  });\n\n  // run interval timers to regularly update map and timediffs\n  window.setInterval(updateLabelDiffTime, 1000);\n  window.setInterval(updateMap, 5000);\n  window.setInterval(function() {\n    if (navigator.geolocation && Store.get('geoLocate')) {\n      navigator.geolocation.getCurrentPosition(function(position) {\n        var baseURL = location.protocol + \"//\" + location.hostname + (location.port ? \":\" + location.port : \"\");\n        var lat = position.coords.latitude;\n        var lon = position.coords.longitude;\n      });\n    }\n  }, 1000);\n\n  //Wipe off/restore map icons when switches are toggled\n  function buildSwitchChangeListener(data, data_type, storageKey) {\n    return function () {\n      Store.set(storageKey, this.checked);\n      if (this.checked) {\n        updateMap();\n      } else {\n        $.each(data_type, function(d, d_type) {\n          $.each(data[d_type], function (key, value) {\n            data[d_type][key].marker.setMap(null);\n          });\n          data[d_type] = {}\n        });\n      }\n    };\n  }\n\n  // Setup UI element interactions\n  $('#gyms-switch').change(buildSwitchChangeListener(map_data, [\"gyms\"], \"showGyms\"));\n  $('#pokemon-switch').change(buildSwitchChangeListener(map_data, [\"pokemons\", \"lure_pokemons\"], \"showPokemon\"));\n\n  $('#pokestops-switch').change(function() {\n    var options = {\n      'duration': 500\n    },\n    wrapper = $('#lured-pokestops-only-wrapper');\n    if (this.checked) {\n      wrapper.show(options);\n    } else {\n      wrapper.hide(options);\n    }\n    return buildSwitchChangeListener(map_data, [\"pokestops\"], \"showPokestops\").bind(this)();\n  });\n\n  $('#lured-pokestops-only-switch').change(function() {\n    Store.set(\"showLuredPokestopsOnly\", this.value);\n    updateMap();\n  });\n\n  $('#sound-switch').change(function() {\n    Store.set(\"playSound\", this.checked);\n  });\n\n  $('#pokemon-icons').change(function() {\n    Store.set('pokemonIcons', this.value);\n    redrawPokemon(map_data.pokemons);\n    redrawPokemon(map_data.lure_pokemons);\n  });\n\n  $('#pokemon-icon-size').change(function() {\n    Store.set('iconSizeModifier', this.value);\n    redrawPokemon(map_data.pokemons);\n    redrawPokemon(map_data.lure_pokemons);\n  });\n\n  $('#geoloc-switch').change(function() {\n    $(\"#next-location\").prop(\"disabled\", this.checked);\n    $(\"#next-location\").css(\"background-color\", this.checked ? \"#e0e0e0\" : \"#ffffff\");\n    if (!navigator.geolocation)\n    this.checked = false;\n    else\n    Store.set('geoLocate', this.checked);\n  });\n});\n"]}