{"version":3,"sources":["../../js/mobile.js"],"names":[],"mappings":";;AAAA,IAAI,iBAAiB,SAAS,cAAT,CAAwB,KAAxB,CAArB;;AAEA,IAAI,SAAS,SAAS,cAAT,CAAwB,SAAxB,CAAb;AACA,OAAO,OAAP,GAAiB,aAAa,MAAb,KAAwB,MAAzC;AACA,OAAO,QAAP,GAAkB,YAAW;AAC3B,eAAa,MAAb,GAAsB,OAAO,OAA7B;AACD,CAFD;;AAIA,IAAI,EAAJ;AACA,IAAI,WAAW,SAAS,cAAT,CAAwB,WAAxB,CAAf;AACA,SAAS,OAAT,GAAmB,aAAa,QAAb,KAA0B,OAA7C;AACA,SAAS,QAAT,GAAoB,YAAW;AAC7B,eAAa,QAAb,GAAwB,SAAS,OAAjC;AACA,MAAI,aAAa,QAAb,KAA0B,OAA9B,EAAuC;AACrC,iBAAa,EAAb;AACD,GAFD,MAEO;AACL,iBAAa,EAAb;AACA;AACD;AACF,CARD;;AAUA,SAAS,aAAT,CAAuB,aAAvB,EAAsC,OAAtC,GAAgD,YAAW;AACzD,MAAI,aAAa,MAAb,KAAwB,MAA5B,EAAoC;AAClC,WAAQ,SAAS,IAAT,GAAgB,SAAxB;AACD,GAFD,MAEO,IAAI,iBAAiB,SAArB,EAAgC;AACrC;AACA,mBAAe,SAAf,GAA2B,qBAA3B;AACA,cAAU,WAAV,CAAsB,kBAAtB,CAAyC,UAAS,CAAT,EAAY;AACnD,qBAAe,SAAf,GAA2B,cAA3B;AACA,eAAS,IAAT,GAAgB,iBAAiB,EAAE,MAAF,CAAS,QAA1B,GAAqC,OAArC,GAA+C,EAAE,MAAF,CAAS,SAAxE;AACD,KAHD,EAGG,UAAS,GAAT,EAAc;AACf,qBAAe,SAAf,GAA2B,EAA3B;AACA,YAAM,6BAA6B,IAAI,OAAvC;AACD,KAND,EAMG;AACD,0BAAoB,IADnB;AAED,eAAS,IAFR;AAGD,kBAAY;AAHX,KANH;AAWD,GAdM,MAcA;AACL,UAAM,8CAAN;AACD;AACF,CApBD;;AAsBA,SAAS,WAAT,GAAuB;AACrB;AACA;AACA;AACA;AACA;AACA,WAAS,gBAAT,CAA0B,YAA1B,EAAwC,OAAxC,CAAgD,UAAS,OAAT,EAAkB;AAChE,QAAI,MAAM,IAAI,IAAJ,GAAW,OAAX,EAAV;AACA,QAAI,gBAAgB,KAAK,KAAL,CAAW,CAAC,MAAM,WAAP,IAAsB,IAAjC,CAApB;AACA,QAAI,WAAW,QAAQ,YAAR,CAAqB,WAArB,CAAf;AACA,QAAI,SAAS,WAAW,aAAxB;AACA,QAAI,MAAM,KAAK,KAAL,CAAW,SAAS,EAApB,CAAV;AACA,QAAI,MAAM,SAAS,EAAnB;AACA,YAAQ,SAAR,GAAqB,SAAS,CAAV,GAAe,MAAM,OAAN,GAAgB,GAAhB,GAAsB,MAArC,GAA8C,WAAlE;AACD,GARD;AASA,OAAK,WAAW,WAAX,EAAwB,IAAxB,CAAL;AACD;AACD,IAAI,aAAa,QAAb,KAA0B,OAA9B,EAAuC;AACrC;AACD;;AAED,SAAS,gBAAT,CAA0B,IAA1B,EAAgC,OAAhC,CAAwC,UAAS,QAAT,EAAmB;AACzD,WAAS,OAAT,GAAmB,YAAW;AAC5B,WAAO,QAAP,CAAgB,QAAhB,GAA2B,KAAK,YAAL,CAAkB,MAAlB,CAA3B;AACD,GAFD;AAGD,CAJD","file":"mobile.built.js","sourcesContent":["var loadingMessage = document.getElementById('msg');\n\nvar useLoc = document.getElementById('use-loc');\nuseLoc.checked = localStorage.useLoc === 'true';\nuseLoc.onchange = function() {\n  localStorage.useLoc = useLoc.checked;\n};\n\nvar tm;\nvar useTimer = document.getElementById('use-timer');\nuseTimer.checked = localStorage.useTimer !== 'false';\nuseTimer.onchange = function() {\n  localStorage.useTimer = useTimer.checked;\n  if (localStorage.useTimer === 'false') {\n    clearTimeout(tm);\n  } else {\n    clearTimeout(tm);\n    updateTimes();\n  }\n};\n\ndocument.querySelector('#nav button').onclick = function() {\n  if (localStorage.useLoc !== 'true') {\n    return (location.href = \"/mobile\");\n  } else if (\"geolocation\" in navigator) {\n    // Getting the GPS position can be very slow on some devices\n    loadingMessage.innerText = 'Getting location...';\n    navigator.geolocation.getCurrentPosition(function(p) {\n      loadingMessage.innerText = 'Reloading...';\n      location.href = '/mobile?lat=' + p.coords.latitude + '&lon=' + p.coords.longitude;\n    }, function(err) {\n      loadingMessage.innerText = '';\n      alert('Failed to get location: ' + err.message);\n    }, {\n      enableHighAccuracy: true,\n      timeout: 5000,\n      maximumAge: 5000\n    });\n  } else {\n    alert('Your device does not support web geolocation');\n  }\n};\n\nfunction updateTimes() {\n  // server tells us how many seconds are left we note the\n  // pageload time and count down from there.\n  // Yes, this could be a smidge innaccurate, but not by\n  // more than 1 second or so which doesn't matter.\n  // And now we don't have to deal with timestamps and dates!\n  document.querySelectorAll('div.remain').forEach(function(element) {\n    var now = new Date().getTime();\n    var secondsPassed = Math.floor((now - page_loaded) / 1000);\n    var alivefor = element.getAttribute('disappear');\n    var remain = alivefor - secondsPassed;\n    var min = Math.floor(remain / 60);\n    var sec = remain % 60;\n    element.innerText = (remain > 0) ? min + ' min ' + sec + ' sec' : '(expired)';\n  });\n  tm = setTimeout(updateTimes, 1000);\n};\nif (localStorage.useTimer !== 'false') {\n  updateTimes();\n}\n\ndocument.querySelectorAll(\"li\").forEach(function(listItem) {\n  listItem.onclick = function() {\n    window.document.location = this.getAttribute('href');\n  };\n});\n"]}