{"version":3,"sources":["../../js/mobile.js"],"names":[],"mappings":";;AAAA,IAAI,SAAS,SAAS,cAAT,CAAwB,SAAxB,CAAb;AACA,OAAO,OAAP,GAAiB,aAAa,MAAb,KAAwB,MAAzC;AACA,OAAO,QAAP,GAAkB,YAAW;AAC3B,eAAa,MAAb,GAAsB,OAAO,OAA7B;AACD,CAFD;;AAKA,IAAI,SAAS,SAAS,aAAT,CAAuB,aAAvB,CAAb;AACA,OAAO,OAAP,GAAiB,YAAW;AAC1B,MAAI,aAAa,MAAb,KAAwB,MAA5B,EAAoC;AAClC,WAAO,QAAP,GAAkB,IAAlB;AACA,WAAQ,SAAS,IAAT,GAAc,SAAtB;AACD,GAHD,MAIK,IAAI,iBAAiB,SAArB,EAAgC;AACnC;AACA,WAAO,QAAP,GAAkB,IAAlB;AACA,WAAO,SAAP,GAAmB,aAAnB;;AAEA;AACA,cAAU,WAAV,CAAsB,kBAAtB,CAAyC,UAAS,CAAT,EAAY;AACnD,aAAO,SAAP,GAAmB,cAAnB;AACA,eAAS,IAAT,GAAc,iBAAe,EAAE,MAAF,CAAS,QAAxB,GAAiC,OAAjC,GAAyC,EAAE,MAAF,CAAS,SAAhE;AAED,KAJD,EAIG,UAAS,GAAT,EAAc;AACf,aAAO,SAAP,GAAmB,QAAnB;AACA,aAAO,QAAP,GAAkB,KAAlB;AACA,YAAM,6BAA6B,IAAI,OAAvC;AAED,KATD,EASG;AACD,0BAAoB,IADnB;AAED,eAAS,IAFR;AAGD,kBAAY;AAHX,KATH;AAcD,GApBI,MAqBA;AACH,UAAM,8CAAN;AACD;AACF,CA7BD;;AA+BA,SAAS,WAAT,GAAuB;AACrB;AACA;AACA;AACA;AACA;AACA,MAAI,UAAU,SAAS,gBAAT,CAA0B,YAA1B,CAAd;AACA,OAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,QAAQ,MAA5B,EAAoC,EAAE,CAAtC,EAAyC;AACvC,QAAI,UAAU,QAAQ,CAAR,CAAd;AACA,QAAI,MAAM,IAAI,IAAJ,GAAW,OAAX,EAAV;AACA,QAAI,gBAAgB,KAAK,KAAL,CAAW,CAAC,MAAM,WAAP,IAAoB,IAA/B,CAApB;AACA,QAAI,WAAY,QAAQ,YAAR,CAAqB,WAArB,CAAhB;AACA,QAAI,SAAS,WAAW,aAAxB;AACA,QAAI,MAAM,KAAK,KAAL,CAAW,SAAS,EAApB,CAAV;AACA,QAAI,MAAM,SAAS,EAAnB;AACA,YAAQ,SAAR,GAAqB,SAAS,CAAV,GAAe,MAAM,OAAN,GAAgB,GAAhB,GAAsB,MAArC,GAA8C,WAAlE;AACD;AACF;AACD,YAAY,WAAZ,EAAyB,IAAzB;;AAEA,SAAS,gBAAT,CAA0B,IAA1B,EAAgC,OAAhC,CAAwC,UAAS,QAAT,EAAmB;AACzD,WAAS,OAAT,GAAmB,YAAW;AAC5B,WAAO,QAAP,CAAgB,QAAhB,GAA2B,KAAK,YAAL,CAAkB,MAAlB,CAA3B;AACD,GAFD;AAGD,CAJD","file":"mobile.built.js","sourcesContent":["var useLoc = document.getElementById('use-loc');\nuseLoc.checked = localStorage.useLoc === 'true';\nuseLoc.onchange = function() {\n  localStorage.useLoc = useLoc.checked;\n};\n\n\nvar navBtn = document.querySelector('#nav button');\nnavBtn.onclick = function() {\n  if (localStorage.useLoc !== 'true') {\n    navBtn.disabled = true;\n    return (location.href=\"/mobile\");\n  }\n  else if (\"geolocation\" in navigator) {\n    // Getting the GPS position can be very slow on some devices\n    navBtn.disabled = true;\n    navBtn.innerText = 'Locating...';\n\n    // Get location and use it!\n    navigator.geolocation.getCurrentPosition(function(p) {\n      navBtn.innerText = 'Reloading...';\n      location.href='/mobile?lat='+p.coords.latitude+'&lon='+p.coords.longitude;\n\n    }, function(err) {\n      navBtn.innerText = 'Reload';\n      navBtn.disabled = false;\n      alert('Failed to get location: ' + err.message);\n\n    }, {\n      enableHighAccuracy: true,\n      timeout: 5000,\n      maximumAge: 5000\n    });\n  }\n  else {\n    alert('Your device does not support web geolocation');\n  }\n};\n\nfunction updateTimes() {\n  // server tells us how many seconds are left we note the\n  // pageload time and count down from there.\n  // Yes, this could be a smidge innaccurate, but not by\n  // more than 1 second or so which doesn't matter.\n  // And now we don't have to deal with timestamps and dates!\n  var remains = document.querySelectorAll('div.remain');\n  for (var i = 0; i < remains.length; ++i) {\n    var element = remains[i];\n    var now = new Date().getTime();\n    var secondsPassed = Math.floor((now - page_loaded)/1000);\n    var alivefor =  element.getAttribute('disappear');\n    var remain = alivefor - secondsPassed;\n    var min = Math.floor(remain / 60);\n    var sec = remain % 60;\n    element.innerText = (remain > 0) ? min + ' min ' + sec + ' sec' : '(expired)';\n  }\n};\nsetInterval(updateTimes, 1000);\n\ndocument.querySelectorAll(\"li\").forEach(function(listItem) {\n  listItem.onclick = function() {\n    window.document.location = this.getAttribute('href');\n  };\n});\n"]}